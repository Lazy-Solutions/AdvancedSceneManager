## Loading screens

<br/>

There are three ways of opening loading screens:
1. Opening a [collection](SceneCollection.md)
2. [LoadingScreenUtility](../api/AdvancedSceneManager.Utility.LoadingScreenUtility.html)
3. [SceneOperation.WithLoadingScreen](../api/AdvancedSceneManager.Core.SceneOperation.html#AdvancedSceneManager_Core_SceneOperation_WithLoadingScreen_AdvancedSceneManager_Models_Scene_)

> A couple default loading screens are provided out-of-the-box, which can be found in 'AdvancedSceneManager/System/Defaults'.

### Custom loading screens

### Short version:

Custom loading screens can be created by creating a script that inherits from [AdvancedSceneManager.Callbacks.LoadingScreen](), and overrides the abstract methods.<br/>
You'd want to do updates in Update() like usual, then probably using [LoadingScreen.operation.totalProgress]().

Finally you may place it in a dedicated scene, and then assigning said scene to a collection or to the scene manager settings in order to use it.

### Longer version:

Setting up a custom loading screen isn't difficult, but it isn't obvious either, we'll cover how to create a custom loading screen and how to use it in a [collection](SceneCollection.md) here.

A loading screen in ASM is implemented as a [MonoBehaviour](https://docs.unity3d.com/ScriptReference/MonoBehaviour.html) (through LoadingScreen class) with a few [IEnumerator](https://docs.unity3d.com/Manual/Coroutines.html) callbacks that are called when a [collection](SceneCollection.md) is opened or closed (or manually opened through [LoadingScreenUtility](../api/AdvancedSceneManager.Utility.LoadingScreenUtility.html)). Callbacks are waited for, and execution of ASM is stopped until a callback is done.

Each loading scene script is then placed in a dedicated scene, which is then automatically opened by ASM.

### Code

Create a new script called 'CustomLoadingScreen' and make it inherit from LoadingScreen, you may have to import 'AdvancedSceneManager.Callbacks'.

Remove default methods generated by unity, and override methods required by LoadingScreen.

Now, you may want the loading screen to fade in, rather than just 'pop' in. You can do this easily by adding a [CanvasGroup](https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/class-CanvasGroup.html), and using the Fade() extension method provided by ASM.
```csharp
//using AdvancedSceneManager.Utility;

public CanvasGroup group;

public override IEnumerator OnOpen()
{
    yield return group.Fade(1, 1);
}

public override IEnumerator OnClose()
{
    yield return group.Fade(0, 1);
}

```
This will fade the [canvas](https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/UICanvas.html) in when loading screen opens and fade out when loading is finished.

Now, for showing progress, add a [Slider](https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/script-Slider.html) variable and update it in Update().

```csharp
public Slider slider;

void Update()
{
    if (operation != null) //Operation may be null for the first few frames
      slider.value = operation.totalProgress;
}

```

This will update a [slider](https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/script-Slider.html) when loading progress changes, note that this will probably not be visible when opening smaller scenes since they may load too quickly, so don't worry too much about it for this tutorial, just know that it exists so that you may use it in the future.

Now that we have a functional implementation of a loading screen, we may begin the graphical part.

### UI

Create a new scene called 'Custom loading screen'.

Add a [canvas](https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/UICanvas.html) and a darkish background [image](https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/script-Image.html), you may add a bright background instead if you are so inclined. Add a [slider](https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/script-Slider.html), which you may style and position as you would like.

Next, add a [CanvasGroup](https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/class-CanvasGroup.html) to canvas and then the 'CustomLoadingScreen' script that we created earlier, assign canvas, group, and slider variables.

![](../image/loading-screen-variables.png)

Setting alpha to 0 in [CanvasGroup](https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/class-CanvasGroup.html) may prevent potential flickering.

### Actually using it

Now as for actually using it, we can assign it to a [collection](SceneCollection.md) in the [Scene Manager Window](SceneManagerWindow.md), by pressing the ![](../image/menu.png) on a collection, and changing 'Loading screen' to 'Override' and assigning the scene to the field that appears directly underneath.

![](../image/loading-screen-override.png)

And with that, we're done! You may now open the collection that has the loading screen assigned to it and the screen should start to fade in the ui you created, and when fade is done, the current collection should close and open the new collection, and then fade your ui out.
